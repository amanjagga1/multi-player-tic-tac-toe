(window["webpackJsonptic-tac-toe"]=window["webpackJsonptic-tac-toe"]||[]).push([[0],{135:function(e,t,r){e.exports=r(261)},144:function(e,t,r){},145:function(e,t,r){},261:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(21),c=r.n(i),l=r(16),o=(r(144),r(145),r(126)),u=function(e){return a.a.createElement("span",{className:"Box",onClick:e.clickHandler},e.value)},s=r(32);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=Object(l.b)((function(e){return{grid:e.grid,activePlayer:e.activePlayer,streak:e.streak,gridSize:e.gridSize,totalTurns:e.totalTurns,gameWinner:e.gameWinner,myIdentity:e.myIdentity}}),(function(e){return{playTurn:function(t){return e(function(e){return function(t,r){var n=r();window.conn&&window.conn.send({gridSize:n.gridSize,streak:n.streak,grid:e.grid,gameWinner:e.gameWinner,activePlayer:e.activePlayer,totalTurns:e.totalTurns}),t(y({type:"PLAY_TURN"},e))}}(t))}}}))((function(e){var t=function(t,r,n){for(var a=1,i=t-1,c=r;i>=0&&n[i][c]===e.activePlayer&&a<e.streak;)i--,a++;if(a===e.streak)return!0;for(i=t+1;i<n.length&&n[i][c]===e.activePlayer&&a<e.streak;)i++,a++;if(a===e.streak)return!0;for(c=r-1,i=t,a=1;c>=0&&n[i][c]===e.activePlayer&&a<e.streak;)c--,a++;if(a===e.streak)return!0;for(c=r+1;c<n[i].length&&n[i][c]===e.activePlayer&&a<e.streak;)c++,a++;if(a===e.streak)return!0;for(i=t-1,c=r-1,a=1;c>=0&&i>=0&&n[i][c]===e.activePlayer&&a<e.streak;)c--,i--,a++;if(a===e.streak)return!0;for(c=r+1,i=t+1;i<n.length&&c<n[i].length&&n[i][c]===e.activePlayer&&a<e.streak;)c++,i++,a++;if(a===e.streak)return!0;for(i=t-1,c=r+1,a=1;i>=0&&c<n[i].length&&n[i][c]===e.activePlayer&&a<e.streak;)c++,i--,a++;if(a===e.streak)return!0;for(i=t+1,c=r-1;i<n.length&&c>=0&&n[i][c]===e.activePlayer&&a<e.streak;)c--,i++,a++;return a===e.streak};return a.a.createElement("div",null,e.grid.map((function(r,n){return a.a.createElement("div",{className:"u-flex",key:n},r&&r.map((function(r,i){return a.a.createElement(u,{key:n+""+i,value:r,clickHandler:function(){return function(r,n){if(e.myIdentity.id===e.activePlayer){var a=Object(o.a)(e.grid);if(!a[r][n]&&!e.gameWinner){a[r][n]=e.activePlayer;var i=e.totalTurns+1,c=!1;i>=e.streak&&t(r,n,a)&&(c=e.activePlayer),c||e.totalTurns!==e.gridSize*e.gridSize||(c="Draw");var l="X"===e.activePlayer?"O":"X";e.playTurn({grid:a,activePlayer:l,gameWinner:c,totalTurns:i})}}else alert("Not your turn")}(n,i)}})})))})))})),g=r(34),m=r(269),v=r(262),p=Object(l.b)((function(e){return console.log(e.gridSize,e.streak,"streak"),{gridSize:e.gridSize,streak:e.streak}}),(function(e){return{resetGrid:function(t){e(function(e){return function(t){window.conn&&window.conn.send({activePlayer:"X",gameWinner:null,totalTurns:0,grid:e.grid,gridSize:e.gridSize,streak:e.streak}),t(y({type:"RESET_GRID"},e))}}(t))}}}))((function(e){var t=Object(n.useState)(""),r=Object(g.a)(t,2),i=r[0],c=r[1],l=Object(n.useState)(""),o=Object(g.a)(l,2),u=o[0],s=o[1],d=[];return a.a.createElement("div",null,a.a.createElement(m.a,{className:"u-margin",placeholder:"n * n grid",value:i,onChange:function(e,t){return c(parseInt(t.value,10))}}),"with",a.a.createElement(m.a,{className:"u-margin",placeholder:"M streak",value:u,onChange:function(e,t){return s(parseInt(t.value,10))}}),a.a.createElement(v.a,{className:"u-margin",onClick:function(){if(i&&u)if(u>i)alert("Streak cannot be greater than grid");else{for(var t=0;t<i;t++){d[t]=[];for(var r=0;r<i;r++)d[t][r]=null}e.resetGrid({gridSize:i,streak:u,grid:d})}else alert("Enter grid size and steak")}},"Start or Reset Game"))})),O=Object(l.b)((function(e){return{activePlayer:e.activePlayer}}))((function(e){return a.a.createElement("div",{className:"u-flex"},a.a.createElement("div",{className:"Player u-margin ".concat("X"===e.activePlayer?"u-active":null)},"Player 1(X)"),a.a.createElement("div",{className:"Player u-margin ".concat("O"===e.activePlayer?"u-active":null)},"Player 2(O)"))})),b=Object(l.b)((function(e){return console.log(e.grid,e.totalTurns,e.gameWinner,"winner"),{gameWinner:e.gameWinner}}))((function(e){return e.gameWinner?a.a.createElement("div",null,a.a.createElement("h1",null,"Game Over"),a.a.createElement("h2",null,"Draw"===e.gameWinner?"Draw":"Player ".concat(e.gameWinner," wins")," ")):null}));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var E=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({presentState:{gridSize:e.gridSize,streak:e.streak,activePlayer:e.activePlayer,grid:e.grid,gameWinner:e.gameWinner,totalTurns:e.totalTurns}},e,{partnerIdentity:e.partnerIdentity})}),(function(e){return{replaceState:function(t){return e(function(e){return y({type:"REPLACE_STATE"},e)}(t))},setIdentity:function(t,r,n){return e(function(e,t,r){return console.log("set",e,t,r),{type:r,value:{id:e,name:"X"===e?"Player 1":"Player 2",peerId:t}}}(t,r,n))}}}))((function(e){var t=Object(n.useState)({}),r=Object(g.a)(t,2),i=r[0],c=r[1],l=Object(n.useState)(null),o=Object(g.a)(l,2),u=o[0],s=o[1],d=Object(n.useRef)(u),y=function(t,r,n,a){console.log("peerAndar",t,t.id,r);var i=t.connect(r);e.setIdentity(n,t.id,"SET_MY_IDENTITY"),e.setIdentity(a,r,"SET_PARTNER_IDENTITY"),window.conn=i};return Object(n.useEffect)((function(){d.current=u})),Object(n.useEffect)((function(){var t=new window.Peer;t.on("open",(function(e){c(t)})),t.on("connection",(function(r){d.current||y(t,r.peer,"O","X"),r.on("data",(function(t){e.replaceState(t)}))}))}),[]),e.partnerIdentity.id?e.children:a.a.createElement("div",null,"Your peer id ",a.a.createElement("h2",null,i.id),a.a.createElement("div",null,a.a.createElement(m.a,{className:"u-margin",placeholder:"Partner peer id",onChange:function(e,t){var r=t.value;return s(r)}}),a.a.createElement(v.a,{className:"u-margin",onClick:function(){return y(i,u,"X","O")}},"Connect")))})),k=function(e){return a.a.createElement("h2",null,"You are ",e.player)};var j=Object(l.b)((function(e){return{partnerIdentity:e.partnerIdentity,myIdentity:e.myIdentity}}))((function(e){return a.a.createElement("div",{className:"App"},a.a.createElement(E,null,a.a.createElement(k,{player:e.myIdentity.name}),a.a.createElement(p,null),a.a.createElement(O,null),a.a.createElement(f,null),a.a.createElement(b,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=r(41),S=r(125);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){Object(s.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I={gridSize:null,streak:null,activePlayer:"X",grid:[],gameWinner:null,totalTurns:0,myIdentity:{},partnerIdentity:{}},D=Object(w.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"INITALIZE_GRID":return T({},e,{grid:t.grid});case"PLAY_TURN":return T({},e,{grid:t.grid,gameWinner:t.gameWinner,activePlayer:t.activePlayer,totalTurns:t.totalTurns});case"RESET_GRID":return T({},I,{myIdentity:e.myIdentity,partnerIdentity:e.partnerIdentity,grid:t.grid,gridSize:t.gridSize,streak:t.streak});case"REPLACE_STATE":return T({},e,{gridSize:t.gridSize,streak:t.streak,activePlayer:t.activePlayer,grid:t.grid,gameWinner:t.gameWinner,totalTurns:t.totalTurns});case"SET_MY_IDENTITY":return T({},e,{myIdentity:t.value});case"SET_PARTNER_IDENTITY":return T({},e,{partnerIdentity:t.value});default:return e}}),Object(w.a)(S.a));c.a.render(a.a.createElement(l.a,{store:D},a.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[135,1,2]]]);
//# sourceMappingURL=main.77d858e1.chunk.js.map